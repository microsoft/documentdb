<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DocumentDB: CRUD Commands Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DocumentDB
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__commands__crud.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CRUD Commands Functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions related to CRUD.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae049129eb6ba49cdc1213a0372395316"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__commands__crud.html#gae049129eb6ba49cdc1213a0372395316">delete</a> (p_database_name text, p_delete __CORE_SCHEMA_V2__.bson, p_insert_documents __CORE_SCHEMA_V2__.bsonsequence default NULL, p_transaction_id text default NULL, p_result OUT __CORE_SCHEMA_V2__.bson, p_success OUT boolean)</td></tr>
<tr class="memdesc:gae049129eb6ba49cdc1213a0372395316"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes documents from a DocumentDB collection.  <a href="group__commands__crud.html#gae049129eb6ba49cdc1213a0372395316">More...</a><br /></td></tr>
<tr class="separator:gae049129eb6ba49cdc1213a0372395316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaedf0e27ac812e3c89c96c65768f1f706"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__commands__crud.html#gaedf0e27ac812e3c89c96c65768f1f706">find_and_modify</a> (p_database_name text, p_message __CORE_SCHEMA_V2__.bson, p_transaction_id text default NULL, p_result OUT __CORE_SCHEMA_V2__.bson, p_success OUT boolean)</td></tr>
<tr class="memdesc:gaedf0e27ac812e3c89c96c65768f1f706"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a find and modify operation on a DocumentDB collection.  <a href="group__commands__crud.html#gaedf0e27ac812e3c89c96c65768f1f706">More...</a><br /></td></tr>
<tr class="separator:gaedf0e27ac812e3c89c96c65768f1f706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf55ec538d2aed431e16880e825af87f3"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__commands__crud.html#gaf55ec538d2aed431e16880e825af87f3">insert</a> (p_database_name text, p_insert __CORE_SCHEMA_V2__.bson, p_insert_documents __CORE_SCHEMA_V2__.bsonsequence default NULL, p_transaction_id text default NULL, p_result OUT __CORE_SCHEMA_V2__.bson, p_success OUT boolean)</td></tr>
<tr class="memdesc:gaf55ec538d2aed431e16880e825af87f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts documents into a DocumentDB collection for a Mongo wire protocol command.  <a href="group__commands__crud.html#gaf55ec538d2aed431e16880e825af87f3">More...</a><br /></td></tr>
<tr class="separator:gaf55ec538d2aed431e16880e825af87f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05657ec17cd63d8e177bf4279d5c05dd"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__commands__crud.html#ga05657ec17cd63d8e177bf4279d5c05dd">insert_one</a> (p_database_name text, p_collection_name text, p_document __CORE_SCHEMA_V2__.bson, p_transaction_id text default null)</td></tr>
<tr class="memdesc:ga05657ec17cd63d8e177bf4279d5c05dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a single document into a collection.  <a href="group__commands__crud.html#ga05657ec17cd63d8e177bf4279d5c05dd">More...</a><br /></td></tr>
<tr class="separator:ga05657ec17cd63d8e177bf4279d5c05dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1faa78569c5adc3a815d1dff0ead0d1"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__commands__crud.html#gae1faa78569c5adc3a815d1dff0ead0d1">aggregate_cursor_first_page</a> (database text, commandSpec __CORE_SCHEMA_V2__.bson, cursorId int8 DEFAULT 0, OUT cursorPage __CORE_SCHEMA_V2__.bson, OUT continuation __CORE_SCHEMA_V2__.bson, OUT persistConnection bool, OUT cursorId int8)</td></tr>
<tr class="memdesc:gae1faa78569c5adc3a815d1dff0ead0d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes an aggregation command and retrieves the first page of results from the cursor.  <a href="group__commands__crud.html#gae1faa78569c5adc3a815d1dff0ead0d1">More...</a><br /></td></tr>
<tr class="separator:gae1faa78569c5adc3a815d1dff0ead0d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad13f35b3ff0024453bfaeef4a26993a7"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__commands__crud.html#gad13f35b3ff0024453bfaeef4a26993a7">find_cursor_first_page</a> (database text, commandSpec __CORE_SCHEMA_V2__.bson, cursorId int8 DEFAULT 0, OUT cursorPage __CORE_SCHEMA_V2__.bson, OUT continuation __CORE_SCHEMA_V2__.bson, OUT persistConnection bool, OUT cursorId int8)</td></tr>
<tr class="memdesc:gad13f35b3ff0024453bfaeef4a26993a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a find command and retrieves the first page of results from the cursor.  <a href="group__commands__crud.html#gad13f35b3ff0024453bfaeef4a26993a7">More...</a><br /></td></tr>
<tr class="separator:gad13f35b3ff0024453bfaeef4a26993a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2faeb5861b505fa81a953de975244094"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__commands__crud.html#ga2faeb5861b505fa81a953de975244094">list_collections_cursor_first_page</a> (database text, commandSpec __CORE_SCHEMA_V2__.bson, cursorId int8 DEFAULT 0, OUT cursorPage __CORE_SCHEMA_V2__.bson, OUT continuation __CORE_SCHEMA_V2__.bson, OUT persistConnection bool, OUT cursorId int8)</td></tr>
<tr class="memdesc:ga2faeb5861b505fa81a953de975244094"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lists collections in a database and retrieves the first page of results from the cursor.  <a href="group__commands__crud.html#ga2faeb5861b505fa81a953de975244094">More...</a><br /></td></tr>
<tr class="separator:ga2faeb5861b505fa81a953de975244094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa1f6ad73d50ed0ebf94b0bac4b71b66"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__commands__crud.html#gaaa1f6ad73d50ed0ebf94b0bac4b71b66">list_indexes_cursor_first_page</a> (database text, commandSpec __CORE_SCHEMA_V2__.bson, cursorId int8 DEFAULT 0, OUT cursorPage __CORE_SCHEMA_V2__.bson, OUT continuation __CORE_SCHEMA_V2__.bson, OUT persistConnection bool, OUT cursorId int8)</td></tr>
<tr class="memdesc:gaaa1f6ad73d50ed0ebf94b0bac4b71b66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lists collections in a database and retrieves the first page of results from the cursor.  <a href="group__commands__crud.html#gaaa1f6ad73d50ed0ebf94b0bac4b71b66">More...</a><br /></td></tr>
<tr class="separator:gaaa1f6ad73d50ed0ebf94b0bac4b71b66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga831ddc78d9b8132d6734785c55d2a4d0"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__commands__crud.html#ga831ddc78d9b8132d6734785c55d2a4d0">cursor_get_more</a> (database text, getMoreSpec __CORE_SCHEMA_V2__.bson, continuationSpec __CORE_SCHEMA_V2__.bson, OUT cursorPage __CORE_SCHEMA_V2__.bson, OUT continuation __CORE_SCHEMA_V2__.bson)</td></tr>
<tr class="memdesc:ga831ddc78d9b8132d6734785c55d2a4d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lists indexes in a collection and retrieves the first page of results from the cursor.  <a href="group__commands__crud.html#ga831ddc78d9b8132d6734785c55d2a4d0">More...</a><br /></td></tr>
<tr class="separator:ga831ddc78d9b8132d6734785c55d2a4d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6745d4516ee88d502122507373e2dc78"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__commands__crud.html#ga6745d4516ee88d502122507373e2dc78">update</a> (p_database_name text, p_update __CORE_SCHEMA_V2__.bson, p_insert_documents __CORE_SCHEMA_V2__.bsonsequence default NULL, p_transaction_id text default NULL, p_result OUT __CORE_SCHEMA_V2__.bson, p_success OUT boolean)</td></tr>
<tr class="memdesc:ga6745d4516ee88d502122507373e2dc78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates documents in a DocumentDB collection.  <a href="group__commands__crud.html#ga6745d4516ee88d502122507373e2dc78">More...</a><br /></td></tr>
<tr class="separator:ga6745d4516ee88d502122507373e2dc78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions related to CRUD. </p>
<p>This group contains all the functions under <code>commands_crud</code>. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae1faa78569c5adc3a815d1dff0ead0d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1faa78569c5adc3a815d1dff0ead0d1">&#9670;&nbsp;</a></span>aggregate_cursor_first_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api aggregate_cursor_first_page </td>
          <td>(</td>
          <td class="paramtype">database&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">commandSpec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cursorId int8 DEFAULT&#160;</td>
          <td class="paramname"><em>0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT cursorPage __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT continuation __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT persistConnection bool&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT cursorId&#160;</td>
          <td class="paramname"><em>int8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes an aggregation command and retrieves the first page of results from the cursor. </p>
<p>This function initiates an aggregation operation on the specified database and collection. It processes the provided BSON-formatted aggregation pipeline and returns the first batch of results. An optional cursor ID can be supplied to continue an existing aggregation session.</p>
<p><b>Usage Examples (referenced from BSON_AGGREGATION_STAGE_MERGE_TESTS.OUT):</b></p><ul>
<li>Aggregate with a <code>$merge</code> stage while creating a new target collection: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> aggregate_cursor_first_page(<span class="stringliteral">&#39;defDb&#39;</span>, <span class="stringliteral">&#39;{ &quot;aggregate&quot;: &quot;defSrc&quot;, &quot;pipeline&quot;: [  {&quot;$merge&quot; : { &quot;into&quot;: &quot;defTar&quot; }} ], &quot;cursor&quot;: { &quot;batchSize&quot;: 1 } }&#39;</span>, <span class="stringliteral">4294967294</span>);</div>
<div class="line"><span class="comment">-- NOTICE:  creating collection</span></div>
<div class="line"><span class="comment">-- Returns an empty &quot;firstBatch&quot; if the pipeline finishes quickly,</span></div>
<div class="line"><span class="comment">-- with &quot;ok&quot; : { &quot;$numberDouble&quot; : &quot;1.0&quot; }.</span></div>
</div><!-- fragment --></li>
<li><code>$merge</code> into a collection in a different database: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> aggregate_cursor_first_page(</div>
<div class="line">    <span class="stringliteral">&#39;sourceDB&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{ &quot;aggregate&quot;: &quot;sourceDumpData&quot;, &quot;pipeline&quot;: [ </span></div>
<div class="line"><span class="stringliteral">        {&quot;$merge&quot; : { &quot;into&quot;: { &quot;db&quot; : &quot;targetDB&quot;, &quot;coll&quot; : &quot;targetDumpData&quot; }, &quot;on&quot; : &quot;_id&quot;, &quot;whenMatched&quot; : &quot;replace&quot; }} </span></div>
<div class="line"><span class="stringliteral">      ], &quot;cursor&quot;: { &quot;batchSize&quot;: 1 } }&#39;</span>,</div>
<div class="line">    <span class="stringliteral">4294967294</span></div>
<div class="line">);</div>
<div class="line"><span class="comment">-- NOTICE:  creating collection</span></div>
<div class="line"><span class="comment">-- Returns an empty &quot;firstBatch&quot; and updates the target collection in &quot;targetDB&quot;.</span></div>
</div><!-- fragment --></li>
<li>Aggregate a collection after inserting documents: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">&#39;db&#39;</span>,<span class="stringliteral">&#39;salaries&#39;</span>,<span class="stringliteral">&#39; { &quot;_id&quot; :  6, &quot;employee&quot;: &quot;Cat&quot;, &quot;salary&quot;: 150000, &quot;fiscal_year&quot;: 2019 }&#39;</span>, <span class="stringliteral">NULL</span>);</div>
<div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> aggregate_cursor_first_page(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{ &quot;aggregate&quot;: &quot;salaries&quot;, &quot;pipeline&quot;: [  {&quot;$merge&quot; : { &quot;into&quot;: &quot;budgets&quot; }} ], &quot;cursor&quot;: { &quot;batchSize&quot;: 1 } }&#39;</span>, <span class="stringliteral">4294967294</span>);</div>
<div class="line"><span class="comment">-- Creates &quot;budgets&quot; if it doesn&#39;t exist and merges data accordingly.</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">database</td><td>Name of the target database. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">commandSpec</td><td>BSON object containing the aggregation command specification. Must include the "aggregate" collection and a valid "pipeline". </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cursorId</td><td>(Optional) ID of an existing cursor. Defaults to 0, indicating a new aggregation session. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursorPage</td><td>BSON object containing the first page of aggregation results. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">continuation</td><td>BSON object with metadata for continuing the cursor, such as <code>cursor_id</code> and <code>batch_size</code>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">persistConnection</td><td>Boolean indicating whether to keep the connection open for further cursor operations. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursorId</td><td>ID of the active cursor after executing the aggregation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A record containing the following fields:<ul>
<li><code>cursorPage</code>: BSON object with the documents retrieved in the first page of the aggregation cursor.</li>
<li><code>continuation</code>: BSON object containing metadata for continuing the cursor.</li>
<li><code>persistConnection</code>: Boolean indicating if the connection should remain open.</li>
<li><code>cursorId</code>: The unique identifier of the active cursor. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga831ddc78d9b8132d6734785c55d2a4d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga831ddc78d9b8132d6734785c55d2a4d0">&#9670;&nbsp;</a></span>cursor_get_more()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api cursor_get_more </td>
          <td>(</td>
          <td class="paramtype">database&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">getMoreSpec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">continuationSpec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT cursorPage __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT continuation __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lists indexes in a collection and retrieves the first page of results from the cursor. </p>
<p>This function retrieves the list of indexes for a specified collection within the given database. It processes the provided BSON-formatted command and returns the first batch of index information. An optional cursor ID can be supplied to continue an existing listIndexes session.</p>
<p><b>Usage Examples:</b></p><ul>
<li>List indexes for a collection: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.list_indexes_cursor_first_page(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;listIndexes&quot;: &quot;my_collection&quot;}&#39;</span></div>
<div class="line">);</div>
<div class="line"><span class="comment">-- Returns the first batch of index metadata and a cursor ID for continuation.</span></div>
</div><!-- fragment --></li>
<li>Continue listing indexes: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.list_indexes_cursor_first_page(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;listIndexes&quot;: &quot;my_collection&quot;}&#39;</span>::documentdb_core.bson,</div>
<div class="line">    <span class="stringliteral">44556</span></div>
<div class="line">);</div>
<div class="line"><span class="comment">-- Resumes at an existing cursor session for index listing.</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">database</td><td>Name of the target database. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">commandSpec</td><td>BSON object containing the listIndexes command specification. Must include the "listIndexes" collection. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cursorId</td><td>(Optional) ID of an existing cursor. Defaults to 0, indicating a new listIndexes session. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursorPage</td><td>BSON object containing the first page of listIndexes results. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">continuation</td><td>BSON object with metadata for continuing the cursor, such as <code>cursor_id</code> and <code>batch_size</code>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">persistConnection</td><td>Boolean indicating whether to keep the connection open for further cursor operations. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursorId</td><td>ID of the active cursor after executing the listIndexes command.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A record containing the following fields:<ul>
<li><code>cursorPage</code>: BSON object with the indexes retrieved in the first page of the cursor.</li>
<li><code>continuation</code>: BSON object containing metadata for continuing the cursor.</li>
<li><code>persistConnection</code>: Boolean indicating if the connection should remain open.</li>
<li><code>cursorId</code>: The unique identifier of the active cursor. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gae049129eb6ba49cdc1213a0372395316"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae049129eb6ba49cdc1213a0372395316">&#9670;&nbsp;</a></span>delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api delete </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_delete __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_insert_documents __CORE_SCHEMA_V2__.bsonsequence default&#160;</td>
          <td class="paramname"><em>NULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_transaction_id text default&#160;</td>
          <td class="paramname"><em>NULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_result OUT __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_success OUT&#160;</td>
          <td class="paramname"><em>boolean</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes documents from a DocumentDB collection. </p>
<p>Processes a MongoDB wire protocol delete command to remove documents from a specified collection in the DocumentDB database. This function handles various delete operations including deleting all documents, deleting with specific filters, handling ordered and unordered deletes, and managing transactions. It also provides detailed error messages for invalid inputs or query syntax errors as observed in the test outputs.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Delete all documents from a collection: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">delete</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;delete&quot;:&quot;removeme&quot;, &quot;deletes&quot;:[{&quot;q&quot;:{},&quot;limit&quot;:0}]}&#39;</span>);</div>
</div><!-- fragment --></li>
<li>Delete documents with a filter: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">delete</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;delete&quot;:&quot;removeme&quot;, &quot;deletes&quot;:[{&quot;q&quot;:{&quot;a&quot;:{&quot;$lte&quot;:3}},&quot;limit&quot;:0}]}&#39;</span>);</div>
</div><!-- fragment --></li>
<li>Delete a single document using <code>_id</code>: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">delete</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;delete&quot;:&quot;removeme&quot;, &quot;deletes&quot;:[{&quot;q&quot;:{&quot;_id&quot;:6},&quot;limit&quot;:1}]}&#39;</span>);</div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>The name of the database containing the target collection from which documents will be deleted. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_delete</td><td>A BSON document representing the delete command, which includes the collection name (<code>"delete":"collection_name"</code>) and an array of delete specifications (<code>"deletes":[]</code>). Each delete specification must contain:<ul>
<li><code>"q"</code>: A BSON document specifying the query criteria to match the documents that should be deleted.</li>
<li><code>"limit"</code>: An integer indicating the number of matched documents to delete. Use <code>0</code> for all matching documents or <code>1</code> for a single document. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_insert_documents</td><td>An optional BSON sequence of documents to insert after the deletion operation. If no documents are to be inserted, this parameter can be set to NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_transaction_id</td><td>An optional transaction ID as a text string. If provided, the delete operation will be part of the specified transaction. Supports idempotent retries of write operations. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_result</td><td>An OUT parameter that will contain a BSON document detailing the results of the delete operation, such as the number of documents deleted (<code>"n"</code>), and any write errors. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_success</td><td>An OUT boolean parameter that indicates whether the delete operation was successful (<code>true</code>) or if an error occurred (<code>false</code>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A record containing the delete operation result (<code>p_result</code>) and success flag (<code>p_success</code>).</dd></dl>
<p><b>Notes:</b></p><ul>
<li><b>Ordered vs Unordered Deletes:</b> The <code>"ordered"</code> field in the delete command determines if the operation should stop at the first error (<code>true</code>) or continue processing remaining deletes (<code>false</code>).</li>
<li><b>Transactions:</b> If <code>p_transaction_id</code> is provided, the delete operation supports retryable writes within transactions.</li>
<li><b>Limitations:</b><ul>
<li>Deleting without filters (<code>"q":{}</code>) and <code>limit</code> set to <code>1</code> or <code>0</code> behaves respectively as deleting a single document or all documents.</li>
<li>Deleting from non-existent collections returns a successful result with <code>"n" : 0</code>.</li>
</ul>
</li>
<li><b>Shard Key Considerations:</b> In sharded environments, specifying the shard key is important for efficient deletions. </li>
</ul>

</div>
</div>
<a id="gaedf0e27ac812e3c89c96c65768f1f706"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaedf0e27ac812e3c89c96c65768f1f706">&#9670;&nbsp;</a></span>find_and_modify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api find_and_modify </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_message __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_transaction_id text default&#160;</td>
          <td class="paramname"><em>NULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_result OUT __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_success OUT&#160;</td>
          <td class="paramname"><em>boolean</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a find and modify operation on a DocumentDB collection. </p>
<p>Executes a MongoDB find and modify command on a specified collection within the DocumentDB database. This function can find a single document based on a query and modify it according to the provided update parameters. It supports various options such as upserting documents, returning the document before or after modification, and participating in transactions.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Find a document and update a field: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.find_and_modify(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;findAndModify&quot;:&quot;mycollection&quot;, &quot;query&quot;:{&quot;_id&quot;:1}, &quot;update&quot;:{&quot;$set&quot;:{&quot;field&quot;:&quot;value&quot;}}, &quot;new&quot;:true}&#39;</span>);</div>
</div><!-- fragment --></li>
<li>Find a document and remove it: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.find_and_modify(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;findAndModify&quot;:&quot;mycollection&quot;, &quot;query&quot;:{&quot;_id&quot;:1}, &quot;remove&quot;:true}&#39;</span>);</div>
</div><!-- fragment --></li>
<li>Upsert a document if it doesn't exist: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.find_and_modify(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;findAndModify&quot;:&quot;mycollection&quot;, &quot;query&quot;:{&quot;_id&quot;:2}, &quot;update&quot;:{&quot;$set&quot;:{&quot;field&quot;:&quot;value&quot;}}, &quot;upsert&quot;:true, &quot;new&quot;:true}&#39;</span>);</div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>The name of the database where the find and modify operation will be executed. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_message</td><td>A BSON document representing the find and modify command, which includes:<ul>
<li><code>"findAndModify"</code>: The name of the collection to operate on.</li>
<li><code>"query"</code>: A BSON document specifying the selection criteria for the document.</li>
<li><code>"update"</code>: A BSON document specifying the modifications to apply.</li>
<li><code>"remove"</code>: A boolean indicating whether to remove the matching document (<code>true</code>) or not (<code>false</code>).</li>
<li><code>"new"</code>: A boolean indicating whether to return the modified document (<code>true</code>) or the original document (<code>false</code>).</li>
<li><code>"upsert"</code>: A boolean indicating whether to insert the document if it does not exist (<code>true</code>). </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_transaction_id</td><td>An optional transaction ID as a text string. If provided, the operation will be part of the specified transaction, supporting idempotent retries. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_result</td><td>An OUT parameter that will contain a BSON document with the result of the operation, including the document before or after modification based on the <code>"new"</code> parameter. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_success</td><td>An OUT boolean parameter that indicates whether the find and modify operation was successful (<code>true</code>) or if an error occurred (<code>false</code>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A record containing the operation result (<code>p_result</code>) and success flag (<code>p_success</code>).</dd></dl>
<p><b>Notes:</b></p><ul>
<li><b>Atomicity:</b> The find and modify operation is atomic and affects a single document.</li>
<li><b>Return Values:</b> The value of the <code>"new"</code> parameter determines whether the returned document is the original or modified version.</li>
<li><b>Shard Key Considerations:</b> In sharded environments, specifying the shard key in the query is important for efficiently locating the document.</li>
<li><b>Transactions:</b> If <code>p_transaction_id</code> is provided, the operation supports retryable writes within transactions. </li>
</ul>

</div>
</div>
<a id="gad13f35b3ff0024453bfaeef4a26993a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad13f35b3ff0024453bfaeef4a26993a7">&#9670;&nbsp;</a></span>find_cursor_first_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api find_cursor_first_page </td>
          <td>(</td>
          <td class="paramtype">database&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">commandSpec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cursorId int8 DEFAULT&#160;</td>
          <td class="paramname"><em>0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT cursorPage __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT continuation __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT persistConnection bool&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT cursorId&#160;</td>
          <td class="paramname"><em>int8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes a find command and retrieves the first page of results from the cursor. </p>
<p>This function performs a find operation on the specified database and collection. It processes the provided BSON-formatted query and returns the first batch of matching documents. An optional cursor ID can be supplied to continue an existing find session.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Retrieve documents by simple filter: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.find_cursor_first_page(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;find&quot;: &quot;my_collection&quot;, &quot;filter&quot;: { &quot;type&quot;: &quot;example&quot; }}&#39;</span></div>
<div class="line">);</div>
<div class="line"><span class="comment">-- Returns the first page with matching documents and a cursor ID for continuation.</span></div>
</div><!-- fragment --></li>
<li>Continue an existing find operation: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.find_cursor_first_page(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;find&quot;: &quot;my_collection&quot;, &quot;filter&quot;: { &quot;type&quot;: &quot;example&quot; }}&#39;</span>::documentdb_core.bson,</div>
<div class="line">    <span class="stringliteral">67890</span></div>
<div class="line">);</div>
<div class="line"><span class="comment">-- Returns the next batch of documents from an existing cursor session.</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">database</td><td>Name of the target database. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">commandSpec</td><td>BSON object containing the find command specification. Must include the "find" collection and a valid "filter". </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cursorId</td><td>(Optional) ID of an existing cursor. Defaults to 0, indicating a new find session. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursorPage</td><td>BSON object containing the first page of find results. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">continuation</td><td>BSON object with metadata for continuing the cursor, such as <code>cursor_id</code> and <code>batch_size</code>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">persistConnection</td><td>Boolean indicating whether to keep the connection open for further cursor operations. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursorId</td><td>ID of the active cursor after executing the find command.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A record containing the following fields:<ul>
<li><code>cursorPage</code>: BSON object with the documents retrieved in the first page of the find cursor.</li>
<li><code>continuation</code>: BSON object containing metadata for continuing the cursor.</li>
<li><code>persistConnection</code>: Boolean indicating if the connection should remain open.</li>
<li><code>cursorId</code>: The unique identifier of the active cursor. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gaf55ec538d2aed431e16880e825af87f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf55ec538d2aed431e16880e825af87f3">&#9670;&nbsp;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api insert </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_insert __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_insert_documents __CORE_SCHEMA_V2__.bsonsequence default&#160;</td>
          <td class="paramname"><em>NULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_transaction_id text default&#160;</td>
          <td class="paramname"><em>NULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_result OUT __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_success OUT&#160;</td>
          <td class="paramname"><em>boolean</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inserts documents into a DocumentDB collection for a Mongo wire protocol command. </p>
<p>This function inserts one or more BSON documents into the specified collection within the given database. It leverages the underlying <code>documentdb_api.insert</code> function to perform the insert operation. The function can optionally include a transaction ID if the insert is part of a larger transaction.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Successful single-row insert: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;_id&quot;:99,&quot;a&quot;:99}]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- (&quot;{ &quot;&quot;n&quot;&quot; : { &quot;&quot;$numberInt&quot;&quot; : &quot;&quot;1&quot;&quot; }, &quot;&quot;ok&quot;&quot; : { &quot;&quot;$numberDouble&quot;&quot; : &quot;&quot;1.0&quot;&quot; } }&quot;,t)</span></div>
</div><!-- fragment --></li>
<li>Attempt to insert with NULL document: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">NULL</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  insert document cannot be NULL</span></div>
</div><!-- fragment --></li>
<li>Insert with missing required fields: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;documents&quot;:[{&quot;a&quot;:1}]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;insert.insert&#39; is missing but a required field</span></div>
</div><!-- fragment --></li>
<li>Insert into a non-existent database: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">NULL</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;a&quot;:1}]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  database name cannot be NULL</span></div>
</div><!-- fragment --></li>
<li>Insert with invalid collection name type: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:[&quot;into&quot;], &quot;documents&quot;:[{&quot;a&quot;:1}]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  collection name has invalid type array</span></div>
</div><!-- fragment --></li>
<li>Insert with invalid documents field type: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:{&quot;a&quot;:1}}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;insert.documents&#39; is the wrong type &#39;object&#39;, expected type &#39;array&#39;</span></div>
</div><!-- fragment --></li>
<li>Insert with unknown fields: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;a&quot;:1}], &quot;extra&quot;:1}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;insert.extra&#39; is an unknown field</span></div>
</div><!-- fragment --></li>
<li>Insert with invalid document type in documents array: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[4]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;insert.documents.0&#39; is the wrong type &#39;int&#39;, expected type &#39;object&#39;</span></div>
</div><!-- fragment --></li>
<li>Insert with invalid <code>ordered</code> field type: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;a&quot;:1}], &quot;ordered&quot;:1}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;insert.ordered&#39; is the wrong type &#39;int&#39;, expected type &#39;bool&#39;</span></div>
</div><!-- fragment --></li>
<li>Insert into system collections (not allowed): <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;system.views&quot;, &quot;documents&quot;:[{&quot;a&quot;:1}], &quot;ordered&quot;:true}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  cannot write to db.system.views</span></div>
</div><!-- fragment --></li>
<li>Insert into a database with the same name but different case and the same collection: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;dB&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;_id&quot;:99,&quot;a&quot;:99}]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  db already exists with different case already have: [db] trying to create [dB]</span></div>
</div><!-- fragment --></li>
<li>Insert into a database with the same name but different case and a different collection: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;dB&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;intonew&quot;, &quot;documents&quot;:[{&quot;_id&quot;:99,&quot;a&quot;:99}]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  db already exists with different case already have: [db] trying to create [dB]</span></div>
</div><!-- fragment --></li>
<li>Insert into the same database and a new collection: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;intonew1&quot;, &quot;documents&quot;:[{&quot;_id&quot;:99,&quot;a&quot;:99}]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- NOTICE:  creating collection</span></div>
<div class="line"><span class="comment">-- insert</span></div>
<div class="line"><span class="comment">-- ---------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">-- (&quot;{ &quot;&quot;n&quot;&quot; : { &quot;&quot;$numberInt&quot;&quot; : &quot;&quot;1&quot;&quot; }, &quot;&quot;ok&quot;&quot; : { &quot;&quot;$numberDouble&quot;&quot; : &quot;&quot;1.0&quot;&quot; } }&quot;,t)</span></div>
<div class="line"><span class="comment">-- (1 row)</span></div>
</div><!-- fragment --></li>
<li>Insert with duplicate keys in a transaction: <div class="fragment"><div class="line"><span class="keywordflow">BEGIN</span>;</div>
<div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;_id&quot;:1,&quot;a&quot;:1}]}&#39;</span>, <span class="stringliteral">NULL</span>, <span class="stringliteral">&#39;insert-1&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- (&quot;{ &quot;&quot;n&quot;&quot; : { &quot;&quot;$numberInt&quot;&quot; : &quot;&quot;1&quot;&quot; }, &quot;&quot;ok&quot;&quot; : { &quot;&quot;$numberDouble&quot;&quot; : &quot;&quot;1.0&quot;&quot; } }&quot;,t)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;_id&quot;:1,&quot;a&quot;:1}]}&#39;</span>, <span class="stringliteral">NULL</span>, <span class="stringliteral">&#39;insert-1&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- (&quot;{ &quot;&quot;n&quot;&quot; : { &quot;&quot;$numberInt&quot;&quot; : &quot;&quot;1&quot;&quot; }, &quot;&quot;ok&quot;&quot; : { &quot;&quot;$numberDouble&quot;&quot; : &quot;&quot;1.0&quot;&quot; } }&quot;,t)</span></div>
<div class="line"><span class="comment">-- (1 row)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">SELECT</span> document <span class="keyword">FROM</span> documentdb_api.collection(<span class="stringliteral">&#39;db&#39;</span>,<span class="stringliteral">&#39;into&#39;</span>) <span class="keyword">WHERE</span> document @@ <span class="stringliteral">&#39;{}&#39;</span>;</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- { &quot;_id&quot; : { &quot;$numberInt&quot; : &quot;1&quot; }, &quot;a&quot; : { &quot;$numberInt&quot; : &quot;1&quot; } }</span></div>
<div class="line"><span class="comment">-- (1 row)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">ROLLBACK</span>;</div>
</div><!-- fragment --></li>
<li>Insert with documents in a special section: <div class="fragment"><div class="line"><span class="keywordflow">BEGIN</span>;</div>
<div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;}&#39;</span>, <span class="stringliteral">&#39;{ &quot;&quot;: [{&quot;_id&quot;:1,&quot;a&quot;:1},{&quot;_id&quot;:2,&quot;a&quot;:2}] }&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- (&quot;{ &quot;&quot;n&quot;&quot; : { &quot;&quot;$numberInt&quot;&quot; : &quot;&quot;2&quot;&quot; }, &quot;&quot;ok&quot;&quot; : { &quot;&quot;$numberDouble&quot;&quot; : &quot;&quot;1.0&quot;&quot; } }&quot;,t)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">SELECT</span> document <span class="keyword">FROM</span> documentdb_api.collection(<span class="stringliteral">&#39;db&#39;</span>,<span class="stringliteral">&#39;into&#39;</span>) <span class="keyword">WHERE</span> document @@ <span class="stringliteral">&#39;{}&#39;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> document-&gt; <span class="stringliteral">&#39;_id&#39;</span>;</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- { &quot;_id&quot; : { &quot;$numberInt&quot; : &quot;2&quot; }, &quot;a&quot; : { &quot;$numberInt&quot; : &quot;2&quot; } }</span></div>
<div class="line"><span class="comment">-- (2 rows)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">ROLLBACK</span>;</div>
</div><!-- fragment --></li>
<li>Insert with both documents specified: <div class="fragment"><div class="line"><span class="keywordflow">BEGIN</span>;</div>
<div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;_id&quot;:1,&quot;a&quot;:1},{&quot;_id&quot;:2,&quot;a&quot;:2}]}&#39;</span>, <span class="stringliteral">&#39;{ &quot;&quot;: [{&quot;_id&quot;:1,&quot;a&quot;:1},{&quot;_id&quot;:2,&quot;a&quot;:2}] }&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  Unexpected additional documents</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">ROLLBACK</span>;</div>
</div><!-- fragment --></li>
<li>Insert with <code>_id</code> undefined (skips the insert): <div class="fragment"><div class="line"><span class="keywordflow">BEGIN</span>;</div>
<div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">insert</span>(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;_id&quot;:{ &quot;$undefined&quot;: true } }]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- (&quot;{ &quot;&quot;n&quot;&quot; : { &quot;&quot;$numberInt&quot;&quot; : &quot;&quot;0&quot;&quot; }, &quot;&quot;ok&quot;&quot; : { &quot;&quot;$numberDouble&quot;&quot; : &quot;&quot;1.0&quot;&quot; } }&quot;,t)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">ROLLBACK</span>;</div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>The name of the database where the documents will be inserted. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_insert</td><td>The BSON object representing the insert command. It must include:<ul>
<li><code>"insert"</code>: The name of the collection where the document will be inserted.</li>
<li><code>"documents"</code>: An array of BSON documents to be inserted. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_insert_documents</td><td>A BSON sequence of additional documents to be inserted (optional). Defaults to NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_transaction_id</td><td>The transaction ID, if the insert operation is part of a transaction (optional). Defaults to NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A BSON object representing the result of the insert operation, which includes:<ul>
<li><code>"n"</code>: The number of documents inserted.</li>
<li><code>"ok"</code>: Indicates whether the operation was successful (<code>1.0</code> for success, <code>0.0</code> for failure). </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga05657ec17cd63d8e177bf4279d5c05dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga05657ec17cd63d8e177bf4279d5c05dd">&#9670;&nbsp;</a></span>insert_one()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api insert_one </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_collection_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_document __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_transaction_id text default&#160;</td>
          <td class="paramname"><em>null</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inserts a single document into a collection. </p>
<p>This function inserts a single BSON document into the specified collection within the given database. It utilizes the underlying <code>documentdb_api.insert</code> function to perform the insert operation. The function can optionally include a transaction ID if the insert is part of a larger transaction.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Successful single-row insert: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;into&#39;</span>, <span class="stringliteral">&#39;{&quot;_id&quot;:99,&quot;a&quot;:99}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- {</span></div>
<div class="line"><span class="comment">--   &quot;n&quot;: { &quot;$numberInt&quot;: &quot;1&quot; },</span></div>
<div class="line"><span class="comment">--   &quot;ok&quot;: { &quot;$numberDouble&quot;: &quot;1.0&quot; }</span></div>
<div class="line"><span class="comment">-- }</span></div>
</div><!-- fragment --></li>
<li>Attempt to insert with NULL document: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;into&#39;</span>, <span class="stringliteral">NULL</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  insert document cannot be NULL</span></div>
</div><!-- fragment --></li>
<li>Insert with missing required fields: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;into&#39;</span>, <span class="stringliteral">&#39;{&quot;documents&quot;:[{&quot;a&quot;:1}]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;insert.insert&#39; is missing but a required field</span></div>
</div><!-- fragment --></li>
<li>Insert into a non-existent database: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">NULL</span>, <span class="stringliteral">&#39;into&#39;</span>, <span class="stringliteral">&#39;{&quot;a&quot;:1}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  database name cannot be NULL</span></div>
</div><!-- fragment --></li>
<li>Insert with invalid collection name type: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;[&quot;into&quot;]&#39;</span>, <span class="stringliteral">&#39;{&quot;a&quot;:1}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  collection name has invalid type array</span></div>
</div><!-- fragment --></li>
<li>Insert with invalid documents field type: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;into&#39;</span>, <span class="stringliteral">&#39;{&quot;documents&quot;: {&quot;a&quot;:1}}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;insert.documents&#39; is the wrong type &#39;object&#39;, expected type &#39;array&#39;</span></div>
</div><!-- fragment --></li>
<li>Insert with unknown fields: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;into&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;a&quot;:1}], &quot;extra&quot;:1}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;insert.extra&#39; is an unknown field</span></div>
</div><!-- fragment --></li>
<li>Insert with invalid document type in documents array: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;into&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[4]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;insert.documents.0&#39; is the wrong type &#39;int&#39;, expected type &#39;object&#39;</span></div>
</div><!-- fragment --></li>
<li>Insert with invalid <code>ordered</code> field type: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;into&#39;</span>, <span class="stringliteral">&#39;{&quot;insert&quot;:&quot;into&quot;, &quot;documents&quot;:[{&quot;a&quot;:1}], &quot;ordered&quot;:1}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;insert.ordered&#39; is the wrong type &#39;int&#39;, expected type &#39;bool&#39;</span></div>
</div><!-- fragment --></li>
<li>Insert into system collections (not allowed): <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.insert_one(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;system.views&#39;</span>, <span class="stringliteral">&#39;{&quot;a&quot;:1}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  cannot write to db.system.views</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>The name of the database where the document will be inserted. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_collection_name</td><td>The name of the collection within the database where the document will be inserted. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_document</td><td>The BSON document to be inserted into the collection. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_transaction_id</td><td>The transaction ID, if the insert operation is part of a transaction (optional). Defaults to NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A BSON object representing the result of the insert operation, which includes:<ul>
<li><code>"n"</code>: The number of documents inserted.</li>
<li><code>"ok"</code>: Indicates whether the operation was successful (<code>1.0</code> for success, <code>0.0</code> for failure). </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga2faeb5861b505fa81a953de975244094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2faeb5861b505fa81a953de975244094">&#9670;&nbsp;</a></span>list_collections_cursor_first_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api list_collections_cursor_first_page </td>
          <td>(</td>
          <td class="paramtype">database&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">commandSpec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cursorId int8 DEFAULT&#160;</td>
          <td class="paramname"><em>0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT cursorPage __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT continuation __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT persistConnection bool&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT cursorId&#160;</td>
          <td class="paramname"><em>int8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lists collections in a database and retrieves the first page of results from the cursor. </p>
<p>This function retrieves the list of collections within the specified database. It processes the provided BSON-formatted command and returns the first batch of collection information. An optional cursor ID can be supplied to continue an existing list collections session.</p>
<p><b>Usage Examples:</b></p><ul>
<li>List collections and retrieve the first page of results: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.list_collections_cursor_first_page(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;listCollections&quot;: 1, &quot;filter&quot;: { &quot;type&quot;: &quot;collection&quot; }}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- {</span></div>
<div class="line"><span class="comment">--   &quot;cursorPage&quot;: { &quot;collections&quot;: [ ... ] },</span></div>
<div class="line"><span class="comment">--   &quot;continuation&quot;: { &quot;cursor_id&quot;: 11223, &quot;batch_size&quot;: 20 },</span></div>
<div class="line"><span class="comment">--   &quot;persistConnection&quot;: true,</span></div>
<div class="line"><span class="comment">--   &quot;cursorId&quot;: 11223</span></div>
<div class="line"><span class="comment">-- }</span></div>
</div><!-- fragment --></li>
<li>Continue listing collections with an existing cursor ID: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.list_collections_cursor_first_page(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;listCollections&quot;: 1, &quot;filter&quot;: { &quot;type&quot;: &quot;collection&quot; }}&#39;</span>::documentdb_core.bson,</div>
<div class="line">    <span class="stringliteral">11223</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- {</span></div>
<div class="line"><span class="comment">--   &quot;cursorPage&quot;: { &quot;collections&quot;: [ ... ] },</span></div>
<div class="line"><span class="comment">--   &quot;continuation&quot;: { &quot;cursor_id&quot;: 11223, &quot;batch_size&quot;: 20 },</span></div>
<div class="line"><span class="comment">--   &quot;persistConnection&quot;: true,</span></div>
<div class="line"><span class="comment">--   &quot;cursorId&quot;: 11223</span></div>
<div class="line"><span class="comment">-- }</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">database</td><td>Name of the target database. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">commandSpec</td><td>BSON object containing the listCollections command specification. Must include the "listCollections" command and a valid "filter". </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cursorId</td><td>(Optional) ID of an existing cursor. Defaults to 0, indicating a new list collections session. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursorPage</td><td>BSON object containing the first page of listCollections results. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">continuation</td><td>BSON object with metadata for continuing the cursor, such as <code>cursor_id</code> and <code>batch_size</code>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">persistConnection</td><td>Boolean indicating whether to keep the connection open for further cursor operations. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursorId</td><td>ID of the active cursor after executing the listCollections command.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Returns:</b> A record containing the following fields:</p><ul>
<li><code>cursorPage</code>: BSON object with the collections retrieved in the first page of the cursor.</li>
<li><code>continuation</code>: BSON object containing metadata for continuing the cursor.</li>
<li><code>persistConnection</code>: Boolean indicating if the connection should remain open.</li>
<li><code>cursorId</code>: The unique identifier of the active cursor. </li>
</ul>

</div>
</div>
<a id="gaaa1f6ad73d50ed0ebf94b0bac4b71b66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaa1f6ad73d50ed0ebf94b0bac4b71b66">&#9670;&nbsp;</a></span>list_indexes_cursor_first_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api list_indexes_cursor_first_page </td>
          <td>(</td>
          <td class="paramtype">database&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">commandSpec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cursorId int8 DEFAULT&#160;</td>
          <td class="paramname"><em>0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT cursorPage __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT continuation __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT persistConnection bool&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT cursorId&#160;</td>
          <td class="paramname"><em>int8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lists collections in a database and retrieves the first page of results from the cursor. </p>
<p>This function retrieves the list of collections within the specified database. It processes the provided BSON-formatted command and returns the first batch of collection information. An optional cursor ID can be supplied to continue an existing listCollections session.</p>
<p><b>Usage Examples:</b></p><ul>
<li>List collections with a specific filter: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.list_collections_cursor_first_page(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;listCollections&quot;: 1, &quot;filter&quot;: { &quot;type&quot;: &quot;collection&quot; }}&#39;</span></div>
<div class="line">);</div>
<div class="line"><span class="comment">-- Returns a cursorPage containing collection metadata.</span></div>
</div><!-- fragment --></li>
<li>Continue listing collections: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.list_collections_cursor_first_page(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;listCollections&quot;: 1, &quot;filter&quot;: { &quot;type&quot;: &quot;collection&quot; }}&#39;</span>::documentdb_core.bson,</div>
<div class="line">    <span class="stringliteral">11223</span></div>
<div class="line">);</div>
<div class="line"><span class="comment">-- Continues from an existing cursor session.</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">database</td><td>Name of the target database. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">commandSpec</td><td>BSON object containing the listCollections command specification. Must include "listCollections" and a valid "filter". </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cursorId</td><td>(Optional) ID of an existing cursor. Defaults to 0, indicating a new listCollections session. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursorPage</td><td>BSON object containing the first page of listCollections results. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">continuation</td><td>BSON object with metadata for continuing the cursor, such as <code>cursor_id</code> and <code>batch_size</code>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">persistConnection</td><td>Boolean indicating whether to keep the connection open for further cursor operations. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursorId</td><td>ID of the active cursor after executing the listCollections command.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Returns:</b> A record containing the following fields:</p><ul>
<li><code>cursorPage</code>: BSON object with the collections retrieved in the first page of the cursor.</li>
<li><code>continuation</code>: BSON object containing metadata for continuing the cursor.</li>
<li><code>persistConnection</code>: Boolean indicating if the connection should remain open.</li>
<li><code>cursorId</code>: The unique identifier of the active cursor. </li>
</ul>

</div>
</div>
<a id="ga6745d4516ee88d502122507373e2dc78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6745d4516ee88d502122507373e2dc78">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api update </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_update __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_insert_documents __CORE_SCHEMA_V2__.bsonsequence default&#160;</td>
          <td class="paramname"><em>NULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_transaction_id text default&#160;</td>
          <td class="paramname"><em>NULL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_result OUT __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_success OUT&#160;</td>
          <td class="paramname"><em>boolean</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates documents in a DocumentDB collection. </p>
<p>Performs an update operation on a specified collection within the DocumentDB database. Optionally inserts new documents if specified and associates the operation with a transaction.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Update documents without inserting new ones: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">update</span>(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;filter&quot;: { &quot;status&quot;: &quot;inactive&quot; }, &quot;update&quot;: { &quot;$set&quot;: { &quot;status&quot;: &quot;active&quot; } }}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns: { &quot;ok&quot; : 1.0, &quot;nModified&quot;: 10, &quot;n&quot;: 10 }</span></div>
</div><!-- fragment --></li>
<li>Update documents and insert new ones within a transaction: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.<span class="keyword">update</span>(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;filter&quot;: { &quot;status&quot;: &quot;inactive&quot; }, &quot;update&quot;: { &quot;$set&quot;: { &quot;status&quot;: &quot;active&quot; } }}&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;[{ &quot;name&quot;: &quot;New Document&quot;, &quot;status&quot;: &quot;active&quot; }]&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;transaction_12345&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns: { &quot;ok&quot; : 1.0, &quot;nModified&quot;: 10, &quot;n&quot;: 10 }</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>The name of the target database. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_update</td><td>BSON object specifying the update criteria and modifications. Must include "filter" and "update" fields. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_insert_documents</td><td>(Optional) BSON sequence of documents to insert if applicable. Defaults to NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_transaction_id</td><td>(Optional) Transaction ID to associate with the update operation. Defaults to NULL. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_result</td><td>BSON object containing the result of the update operation. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_success</td><td>Boolean indicating the success status of the update operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A record containing:<ul>
<li><code>p_result</code>: BSON object with details of the update operation result.</li>
<li><code>p_success</code>: Boolean indicating whether the update operation was successful. </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>

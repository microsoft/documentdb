<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DocumentDB: Schema Management Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DocumentDB
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__schema__mgmt.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Schema Management Functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions related to Schema Management.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga56ca2d601a3714e0f678f175b772d35c"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__mgmt.html#ga56ca2d601a3714e0f678f175b772d35c">coll_mod</a> (IN p_database_name text, IN p_collection_name text, IN p_spec __CORE_SCHEMA_V2__.bson)</td></tr>
<tr class="memdesc:ga56ca2d601a3714e0f678f175b772d35c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modifies collection options in the DocumentDB system.  <a href="group__schema__mgmt.html#ga56ca2d601a3714e0f678f175b772d35c">More...</a><br /></td></tr>
<tr class="separator:ga56ca2d601a3714e0f678f175b772d35c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf869a686860383a0ac88e0e7fa25931c"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__mgmt.html#gaf869a686860383a0ac88e0e7fa25931c">create_collection</a> (p_database_name text, p_collection_name text)</td></tr>
<tr class="memdesc:gaf869a686860383a0ac88e0e7fa25931c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new collection in the DocumentDB database.  <a href="group__schema__mgmt.html#gaf869a686860383a0ac88e0e7fa25931c">More...</a><br /></td></tr>
<tr class="separator:gaf869a686860383a0ac88e0e7fa25931c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac76442ce225a1d09cf070084619b5840"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__mgmt.html#gac76442ce225a1d09cf070084619b5840">create_collection_view</a> (dbname text, createSpec __CORE_SCHEMA_V2__.bson)</td></tr>
<tr class="memdesc:gac76442ce225a1d09cf070084619b5840"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new collection view in the DocumentDB database.  <a href="group__schema__mgmt.html#gac76442ce225a1d09cf070084619b5840">More...</a><br /></td></tr>
<tr class="separator:gac76442ce225a1d09cf070084619b5840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b4a790daa65bf876b7d97035f078b03"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__mgmt.html#ga9b4a790daa65bf876b7d97035f078b03">drop_collection</a> (p_database_name text, p_collection_name text, p_write_concern __CORE_SCHEMA_V2__.bson default null, p_collection_uuid uuid default null, p_track_changes bool default true)</td></tr>
<tr class="memdesc:ga9b4a790daa65bf876b7d97035f078b03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drops an existing collection from the DocumentDB database.  <a href="group__schema__mgmt.html#ga9b4a790daa65bf876b7d97035f078b03">More...</a><br /></td></tr>
<tr class="separator:ga9b4a790daa65bf876b7d97035f078b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga64a8f15d44352a52f31bfb40e8ed1d69"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__mgmt.html#ga64a8f15d44352a52f31bfb40e8ed1d69">drop_database</a> (p_database_name text, p_write_concern __CORE_SCHEMA_V2__.bson default null)</td></tr>
<tr class="memdesc:ga64a8f15d44352a52f31bfb40e8ed1d69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drops an existing database from the DocumentDB system.  <a href="group__schema__mgmt.html#ga64a8f15d44352a52f31bfb40e8ed1d69">More...</a><br /></td></tr>
<tr class="separator:ga64a8f15d44352a52f31bfb40e8ed1d69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf5d82f8606ff8197752b360ac935c17"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__mgmt.html#gabf5d82f8606ff8197752b360ac935c17">rename_collection</a> (p_database_name text, p_collection_name text, p_target_name text, p_drop_target bool default false)</td></tr>
<tr class="memdesc:gabf5d82f8606ff8197752b360ac935c17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renames an existing collection in the DocumentDB database.  <a href="group__schema__mgmt.html#gabf5d82f8606ff8197752b360ac935c17">More...</a><br /></td></tr>
<tr class="separator:gabf5d82f8606ff8197752b360ac935c17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad3b3de31108e771264bb702f3c83df2c"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__mgmt.html#gad3b3de31108e771264bb702f3c83df2c">shard_collection</a> (p_database_name text, p_collection_name text, p_shard_key __CORE_SCHEMA_V2__.bson, p_is_reshard bool default true)</td></tr>
<tr class="memdesc:gad3b3de31108e771264bb702f3c83df2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shards an existing collection in the DocumentDB database.  <a href="group__schema__mgmt.html#gad3b3de31108e771264bb702f3c83df2c">More...</a><br /></td></tr>
<tr class="separator:gad3b3de31108e771264bb702f3c83df2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga002618c201c9c9899475d7203c5e8149"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__mgmt.html#ga002618c201c9c9899475d7203c5e8149">shard_collection</a> (p_shard_key_spec __CORE_SCHEMA_V2__.bson)</td></tr>
<tr class="memdesc:ga002618c201c9c9899475d7203c5e8149"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shards an existing collection in the DocumentDB database.  <a href="group__schema__mgmt.html#ga002618c201c9c9899475d7203c5e8149">More...</a><br /></td></tr>
<tr class="separator:ga002618c201c9c9899475d7203c5e8149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d8913517c102963b0970eb72d95e758"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__mgmt.html#ga1d8913517c102963b0970eb72d95e758">reshard_collection</a> (p_shard_key_spec __CORE_SCHEMA_V2__.bson)</td></tr>
<tr class="memdesc:ga1d8913517c102963b0970eb72d95e758"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reshards a specified collection.  <a href="group__schema__mgmt.html#ga1d8913517c102963b0970eb72d95e758">More...</a><br /></td></tr>
<tr class="separator:ga1d8913517c102963b0970eb72d95e758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga074a14262918aaf6e925c065c0e07fdc"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__mgmt.html#ga074a14262918aaf6e925c065c0e07fdc">unshard_collection</a> (p_shard_key_spec __CORE_SCHEMA_V2__.bson)</td></tr>
<tr class="memdesc:ga074a14262918aaf6e925c065c0e07fdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unshards a specified collection.  <a href="group__schema__mgmt.html#ga074a14262918aaf6e925c065c0e07fdc">More...</a><br /></td></tr>
<tr class="separator:ga074a14262918aaf6e925c065c0e07fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions related to Schema Management. </p>
<p>This group contains all the functions under <code>schema_mgmt</code>. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga56ca2d601a3714e0f678f175b772d35c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga56ca2d601a3714e0f678f175b772d35c">&#9670;&nbsp;</a></span>coll_mod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api coll_mod </td>
          <td>(</td>
          <td class="paramtype">IN p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN p_collection_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN p_spec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modifies collection options in the DocumentDB system. </p>
<p>The <code>coll_mod</code> function allows for the modification of collection settings within a specified database. It accepts a BSON-formatted specification detailing the changes to be applied, such as altering index settings or enabling TTL (Time-To-Live) for documents.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Modify an existing index to update <code>expireAfterSeconds</code>: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.coll_mod(<span class="stringliteral">&#39;commands&#39;</span>, <span class="stringliteral">&#39;collModTest&#39;</span>, <span class="stringliteral">&#39;{&quot;collMod&quot;: &quot;collModTest&quot;, &quot;index&quot;: {&quot;name&quot;: &quot;a_1&quot;, &quot;expireAfterSeconds&quot;: 2000}}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">--  { &quot;ok&quot; : { &quot;$numberInt&quot; : &quot;1&quot; } }</span></div>
</div><!-- fragment --></li>
<li>Attempt to modify a non-TTL index: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.coll_mod(<span class="stringliteral">&#39;commands&#39;</span>, <span class="stringliteral">&#39;collModTest&#39;</span>, <span class="stringliteral">&#39;{&quot;collMod&quot;: &quot;collModTest&quot;, &quot;index&quot;: {&quot;name&quot;: &quot;a_1&quot;}}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  no expireAfterSeconds or hidden field</span></div>
</div><!-- fragment --></li>
<li>Attempt to modify with an invalid field: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.coll_mod(<span class="stringliteral">&#39;commands&#39;</span>, <span class="stringliteral">&#39;collModTest&#39;</span>, <span class="stringliteral">&#39;{&quot;collMod&quot;: &quot;collModTest&quot;, &quot;hello&quot;: 1}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  BSON field &#39;collMod.hello&#39; is an unknown field.</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>Name of the target database. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_collection_name</td><td>Name of the collection to modify. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_spec</td><td>BSON object containing the modification specification. Must include the "collMod" field and relevant modification details.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A BSON object representing the result of the collection modification operation, including fields such as:<ul>
<li><code>ok</code>: Indicates the success status of the operation. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gaf869a686860383a0ac88e0e7fa25931c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf869a686860383a0ac88e0e7fa25931c">&#9670;&nbsp;</a></span>create_collection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api create_collection </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_collection_name&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new collection in the DocumentDB database. </p>
<p>This function creates a collection in the specified database with the given name. The collection will be initialized according to the DocumentDB API specifications.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Create a new collection named "employees" in the "hr_database": <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.create_collection(<span class="stringliteral">&#39;hr_database&#39;</span>, <span class="stringliteral">&#39;employees&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- true</span></div>
</div><!-- fragment --></li>
<li>Attempt to create a collection that already exists: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.create_collection(<span class="stringliteral">&#39;hr_database&#39;</span>, <span class="stringliteral">&#39;employees&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- false</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>Name of the target database where the collection will be created. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_collection_name</td><td>Name of the collection to create. Must not be NULL and must adhere to naming conventions.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Returns:</b></p><ul>
<li><code>true</code> if the collection is created successfully.</li>
<li><code>false</code> if the operation fails. </li>
</ul>

</div>
</div>
<a id="gac76442ce225a1d09cf070084619b5840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac76442ce225a1d09cf070084619b5840">&#9670;&nbsp;</a></span>create_collection_view()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api create_collection_view </td>
          <td>(</td>
          <td class="paramtype">dbname&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">createSpec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new collection view in the DocumentDB database. </p>
<p>The <code>create_collection_view</code> function establishes a collection view within the specified database using the provided BSON specification. The specification outlines the view's structure, configuration, and any associated query or transformation logic, enabling customized data representations without duplicating data.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Create a simple collection view: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.create_collection_view(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{ &quot;create&quot;: &quot;my_view&quot;, &quot;viewOn&quot;: &quot;my_collection&quot;, &quot;pipeline&quot;: [{ &quot;$match&quot;: { &quot;status&quot;: &quot;active&quot; } }]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- {</span></div>
<div class="line"><span class="comment">--   &quot;ok&quot; : { &quot;$numberDouble&quot; : &quot;1.0&quot; }</span></div>
<div class="line"><span class="comment">-- }</span></div>
</div><!-- fragment --></li>
<li>Create a collection view with aggregation stages: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.create_collection_view(</div>
<div class="line">    <span class="stringliteral">&#39;my_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{ &quot;create&quot;: &quot;active_users_view&quot;, &quot;viewOn&quot;: &quot;users&quot;, &quot;pipeline&quot;: [{ &quot;$match&quot;: { &quot;active&quot;: true } }, { &quot;$project&quot;: { &quot;username&quot;: 1, &quot;email&quot;: 1 } }]}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- {</span></div>
<div class="line"><span class="comment">--   &quot;ok&quot; : { &quot;$numberDouble&quot; : &quot;1.0&quot; }</span></div>
<div class="line"><span class="comment">-- }</span></div>
</div><!-- fragment --></li>
<li>Handle errors when creating a collection view:<ul>
<li>Creating a view that already exists: ```sql SELECT documentdb_api.create_collection_view( 'my_database', '{ "create": "my_view", "viewOn": "my_collection", "pipeline": [{ "$match": { "status": "active" } }]}'); &ndash; Returns: &ndash; ERROR: collection view "my_view" already exists ```</li>
<li>Providing an invalid specification: ```sql SELECT documentdb_api.create_collection_view( 'my_database', '{ "create": "", "viewOn": "my_collection"}'); &ndash; Returns: &ndash; ERROR: Invalid namespace specified 'my_database.' ```</li>
</ul>
</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dbname</td><td>Name of the target database where the collection view will be created. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">createSpec</td><td>BSON object specifying the details for the new collection view. Must include fields such as "create", "viewOn", and "pipeline".</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A BSON object representing the result of the view creation operation, including fields such as:<ul>
<li><code>ok</code>: Indicates the success status of the operation. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga9b4a790daa65bf876b7d97035f078b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b4a790daa65bf876b7d97035f078b03">&#9670;&nbsp;</a></span>drop_collection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api drop_collection </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_collection_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_write_concern __CORE_SCHEMA_V2__.bson default&#160;</td>
          <td class="paramname"><em>null</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_collection_uuid uuid default&#160;</td>
          <td class="paramname"><em>null</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_track_changes bool default&#160;</td>
          <td class="paramname"><em>true</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drops an existing collection from the DocumentDB database. </p>
<p>This function removes the specified collection from the target database. Optionally, a write concern, collection UUID, and change tracking settings can be provided to control the behavior of the drop operation.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Drop an existing collection without additional parameters: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.drop_collection(<span class="stringliteral">&#39;hr_database&#39;</span>, <span class="stringliteral">&#39;employees&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- true</span></div>
</div><!-- fragment --></li>
<li>Drop a collection with a specific write concern: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.drop_collection(</div>
<div class="line">    <span class="stringliteral">&#39;hr_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;employees&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;w&quot;: &quot;majority&quot;}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- true</span></div>
</div><!-- fragment --></li>
<li>Drop a collection using its UUID: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.drop_collection(</div>
<div class="line">    <span class="stringliteral">&#39;hr_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;employees&#39;</span>,</div>
<div class="line">    <span class="stringliteral">NULL</span>,</div>
<div class="line">    <span class="stringliteral">&#39;123e4567-e89b-12d3-a456-426614174000&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- true</span></div>
</div><!-- fragment --></li>
<li>Drop a collection and disable change tracking: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.drop_collection(</div>
<div class="line">    <span class="stringliteral">&#39;hr_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;employees&#39;</span>,</div>
<div class="line">    <span class="stringliteral">NULL</span>,</div>
<div class="line">    <span class="stringliteral">NULL</span>,</div>
<div class="line">    <span class="stringliteral">false</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- true</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>Name of the target database from which the collection will be dropped. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_collection_name</td><td>Name of the collection to drop. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_write_concern</td><td>(Optional) BSON object specifying the write concern for the operation. Defaults to NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_collection_uuid</td><td>(Optional) UUID of the collection to drop. Defaults to NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_track_changes</td><td>(Optional) Boolean indicating whether changes should be tracked. Defaults to true.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Returns:</b></p><ul>
<li><code>true</code> if the collection is dropped successfully.</li>
<li><code>false</code> if the operation fails. </li>
</ul>

</div>
</div>
<a id="ga64a8f15d44352a52f31bfb40e8ed1d69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga64a8f15d44352a52f31bfb40e8ed1d69">&#9670;&nbsp;</a></span>drop_database()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api drop_database </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_write_concern __CORE_SCHEMA_V2__.bson default&#160;</td>
          <td class="paramname"><em>null</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drops an existing database from the DocumentDB system. </p>
<p>This function removes the specified database and all collections within it. Optionally, a write concern can be provided to control the behavior of the drop operation. The function performs a loop to drop each collection associated with the database before removing the database itself.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Drop a database: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.drop_database(<span class="stringliteral">&#39;hr_database&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">--</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>Name of the target database to drop. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_write_concern</td><td>(Optional) BSON object specifying the write concern for the operation. Defaults to NULL.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Returns:</b></p><ul>
<li>Void if the database is dropped successfully.</li>
<li>An error if the operation fails. </li>
</ul>

</div>
</div>
<a id="gabf5d82f8606ff8197752b360ac935c17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf5d82f8606ff8197752b360ac935c17">&#9670;&nbsp;</a></span>rename_collection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api rename_collection </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_collection_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_target_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_drop_target bool default&#160;</td>
          <td class="paramname"><em>false</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renames an existing collection in the DocumentDB database. </p>
<p>This function renames a collection within the specified database. Optionally, a boolean flag can be provided to drop the target collection if it already exists before renaming.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Rename a collection without dropping the target collection: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.rename_collection(<span class="stringliteral">&#39;hr_database&#39;</span>, <span class="stringliteral">&#39;employees&#39;</span>, <span class="stringliteral">&#39;staff&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">--</span></div>
</div><!-- fragment --></li>
<li>Rename a collection and drop the target collection if it exists: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.rename_collection(<span class="stringliteral">&#39;hr_database&#39;</span>, <span class="stringliteral">&#39;employees&#39;</span>, <span class="stringliteral">&#39;staff&#39;</span>, <span class="stringliteral">true</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">--</span></div>
</div><!-- fragment --></li>
<li>Attempt to rename a collection to a name that already exists without dropping: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.rename_collection(<span class="stringliteral">&#39;hr_database&#39;</span>, <span class="stringliteral">&#39;employees&#39;</span>, <span class="stringliteral">&#39;staff&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- ERROR:  collection &quot;staff&quot; already exists</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>Name of the target database containing the collection to rename. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_collection_name</td><td>Current name of the collection to rename. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_target_name</td><td>New name for the collection. Must not be NULL and must adhere to naming conventions. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_drop_target</td><td>(Optional) Boolean flag indicating whether to drop the target collection if it exists. Defaults to false.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Returns:</b></p><ul>
<li>Void if the collection is renamed successfully.</li>
<li>An error if the operation fails. </li>
</ul>

</div>
</div>
<a id="ga1d8913517c102963b0970eb72d95e758"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1d8913517c102963b0970eb72d95e758">&#9670;&nbsp;</a></span>reshard_collection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api reshard_collection </td>
          <td>(</td>
          <td class="paramtype">p_shard_key_spec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reshards a specified collection. </p>
<p>This function reshards the given collection based on the provided options. If the same options are passed in as the current sharding configuration, the function will skip the resharding process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reshardCollection</td><td>The name of the collection to be resharded. </td></tr>
    <tr><td class="paramname">key</td><td>The key to be used for sharding. </td></tr>
    <tr><td class="paramname">unique</td><td>A boolean indicating whether the shard key should be unique.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A notice indicating whether the resharing was skipped or performed.</dd></dl>
<p><b>Usage Examples:</b> </p><div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.reshard_collection(<span class="stringliteral">&#39;{ &quot;reshardCollection&quot;: &quot;comm_sh_coll.single_shard&quot;, &quot;key&quot;: { &quot;_id&quot;: &quot;hashed&quot; }, &quot;unique&quot;: false }&#39;</span>);</div>
<div class="line"> reshard_collection </div>
<div class="line"> <span class="comment">---------------------------------------------------------------------</span></div>
<div class="line"> </div>
<div class="line"> (<span class="stringliteral">1</span> <span class="keyword">row</span>)</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gad3b3de31108e771264bb702f3c83df2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad3b3de31108e771264bb702f3c83df2c">&#9670;&nbsp;</a></span>shard_collection() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api shard_collection </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_collection_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_shard_key __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_is_reshard bool default&#160;</td>
          <td class="paramname"><em>true</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shards an existing collection in the DocumentDB database. </p>
<p>The <code>shard_collection</code> function enables sharding for a specified collection within a target database. It requires a shard key to distribute data across shards effectively. Optionally, additional parameters such as unique constraint and collation can be provided to fine-tune the sharding behavior.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Shard an existing collection with a simple shard key: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.shard_collection(</div>
<div class="line">    <span class="stringliteral">&#39;hr_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;employees&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;shardKey&quot;: {&quot;employee_id&quot;: 1}}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- </span></div>
</div><!-- fragment --></li>
<li>Shard a collection with a unique shard key: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.shard_collection(</div>
<div class="line">    <span class="stringliteral">&#39;hr_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;employees&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;shardKey&quot;: {&quot;email&quot;: 1}, &quot;unique&quot;: true}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">-- </span></div>
</div><!-- fragment --></li>
<li>Shard a collection with a specific collation: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.shard_collection(</div>
<div class="line">    <span class="stringliteral">&#39;hr_database&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;employees&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;{&quot;shardKey&quot;: {&quot;last_name&quot;: 1}, &quot;collation&quot;: {&quot;locale&quot;: &quot;en_US&quot;}}&#39;</span>);</div>
<div class="line"><span class="comment">-- Returns:</span></div>
<div class="line"><span class="comment">--</span></div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>Name of the target database containing the collection to shard. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_collection_name</td><td>Name of the collection to shard. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_shard_key</td><td>BSON object specifying the shard key and optional sharding options. Must include the "shardKey" field. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga002618c201c9c9899475d7203c5e8149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga002618c201c9c9899475d7203c5e8149">&#9670;&nbsp;</a></span>shard_collection() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api shard_collection </td>
          <td>(</td>
          <td class="paramtype">p_shard_key_spec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shards an existing collection in the DocumentDB database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_shard_key_spec</td><td>BSON object specifying the shard key. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p><b>Usage Examples:</b> </p><div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.shard_collection(<span class="stringliteral">&#39;{ &quot;shardKey&quot;: { &quot;_id&quot;: &quot;hashed&quot; } }&#39;</span>);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga074a14262918aaf6e925c065c0e07fdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga074a14262918aaf6e925c065c0e07fdc">&#9670;&nbsp;</a></span>unshard_collection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api unshard_collection </td>
          <td>(</td>
          <td class="paramtype">p_shard_key_spec __CORE_SCHEMA_V2__.&#160;</td>
          <td class="paramname"><em>bson</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unshards a specified collection. </p>
<p>This function unshards the given collection based on the provided options.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">unshardCollection</td><td>The name of the collection to be unsharded.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A notice indicating the result of the unsharding operation.</dd></dl>
<p><b>Usage Examples:</b> </p><div class="fragment"><div class="line"><span class="keyword">SELECT</span> documentdb_api.unshard_collection(<span class="stringliteral">&#39;{ &quot;unshardCollection&quot;: &quot;comm_sh_coll.comp_shard&quot; }&#39;</span>);</div>
<div class="line"> unshard_collection </div>
<div class="line"> <span class="comment">---------------------------------------------------------------------</span></div>
<div class="line"> </div>
<div class="line"> (<span class="stringliteral">1</span> <span class="keyword">row</span>)</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DocumentDB: Index Management Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DocumentDB
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__index__mgmt.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Index Management Functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions related to Index Management.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3201e336e84b8cf67e0a36a161b2df52"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__index__mgmt.html#ga3201e336e84b8cf67e0a36a161b2df52">create_indexes_background</a> (p_database_name text, p_index_spec documentdb_core.bson, OUT retval documentdb_core.bson, OUT ok boolean, OUT requests documentdb_core.bson)</td></tr>
<tr class="memdesc:ga3201e336e84b8cf67e0a36a161b2df52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates indexes on a collection in the background.  <a href="group__index__mgmt.html#ga3201e336e84b8cf67e0a36a161b2df52">More...</a><br /></td></tr>
<tr class="separator:ga3201e336e84b8cf67e0a36a161b2df52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf08aa4458e39b59f23fd7e5feaf53d6b"><td class="memItemLeft" align="right" valign="top">documentdb_api&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__index__mgmt.html#gaf08aa4458e39b59f23fd7e5feaf53d6b">drop_indexes</a> (IN p_database_name text, IN p_arg documentdb_core.bson, INOUT retval documentdb_core.bson DEFAULT null) LANGUAGE c AS 'MODULE_PATHNAME'</td></tr>
<tr class="memdesc:gaf08aa4458e39b59f23fd7e5feaf53d6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drops index(es) from a MongoDB collection.  <a href="group__index__mgmt.html#gaf08aa4458e39b59f23fd7e5feaf53d6b">More...</a><br /></td></tr>
<tr class="separator:gaf08aa4458e39b59f23fd7e5feaf53d6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions related to Index Management. </p>
<p>This group contains all the functions under <code>index_mgmt</code>. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3201e336e84b8cf67e0a36a161b2df52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3201e336e84b8cf67e0a36a161b2df52">&#9670;&nbsp;</a></span>create_indexes_background()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api create_indexes_background </td>
          <td>(</td>
          <td class="paramtype">p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p_index_spec documentdb_core.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT retval documentdb_core.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT ok&#160;</td>
          <td class="paramname"><em>boolean</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT requests documentdb_core.&#160;</td>
          <td class="paramname"><em>bson</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates indexes on a collection in the background. </p>
<p>This function processes the MongoDB <code>createIndexes</code> command asynchronously. It allows you to create one or more indexes on a specified collection without blocking other database operations. The indexes are created in the background by queueing the index builds, which are then processed by background workers.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Create a single index on a collection: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> documentdb_api.create_indexes_background(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;createIndexes&quot;: &quot;mycollection&quot;, &quot;indexes&quot;: [{&quot;key&quot;: {&quot;field1&quot;: 1}, &quot;name&quot;: &quot;index1&quot;}]}&#39;</span>);</div>
</div><!-- fragment --></li>
<li>Create multiple indexes on a collection: <div class="fragment"><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> documentdb_api.create_indexes_background(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;createIndexes&quot;: &quot;mycollection&quot;, &quot;indexes&quot;: [{&quot;key&quot;: {&quot;field1&quot;: 1}, &quot;name&quot;: &quot;index1&quot;}, {&quot;key&quot;: {&quot;field2&quot;: -1}, &quot;name&quot;: &quot;index2&quot;}]}&#39;</span>);</div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>The name of the database where the indexes will be created. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_command</td><td>A BSON document representing the <code>createIndexes</code> command, which includes:<ul>
<li><code>"createIndexes"</code>: The name of the collection on which to create the indexes. Must be a string.</li>
<li><code>"indexes"</code>: An array of index specifications. Each specification must include:<ul>
<li><code>"key"</code>: An object specifying the fields to index and their sort order (<code>1</code> for ascending, <code>-1</code> for descending).</li>
<li><code>"name"</code>: The name of the index.</li>
<li>Optional fields like <code>"unique"</code>, <code>"background"</code>, etc.</li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A record containing:<ul>
<li><code>retval</code> (documentdb_core.bson): A BSON document with the result of the operation, including any error messages.</li>
<li><code>ok</code> (boolean): Indicates whether the command was successful (<code>true</code>) or if an error occurred (<code>false</code>).</li>
<li><code>requests</code> (documentdb_core.bson): Details of the index build requests that have been queued.</li>
</ul>
</dd></dl>
<p><b>Notes:</b></p><ul>
<li><b>Asynchronous Operation:</b> Index creation is performed asynchronously. The function returns immediately after queuing the index build requests.</li>
<li><b>Index Build Monitoring:</b> Use other system functions or views to monitor the progress of background index builds.</li>
<li><b>Limitations:</b><ul>
<li>The function does not block, so subsequent queries might not see the new indexes until they are built.</li>
<li>Index names must be unique within the collection.</li>
</ul>
</li>
<li><b>Transaction Support:</b> This function does not support transactions since index creation is a schema-changing operation.</li>
</ul>
<p><b>Related Functions:</b></p><ul>
<li><code>documentdb_api.create_indexes</code>: For creating indexes synchronously.</li>
<li><code>documentdb_api.list_indexes</code>: To list existing indexes on a collection. </li>
</ul>

</div>
</div>
<a id="gaf08aa4458e39b59f23fd7e5feaf53d6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf08aa4458e39b59f23fd7e5feaf53d6b">&#9670;&nbsp;</a></span>drop_indexes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">documentdb_api drop_indexes </td>
          <td>(</td>
          <td class="paramtype">IN p_database_name&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN p_arg documentdb_core.&#160;</td>
          <td class="paramname"><em>bson</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INOUT retval documentdb_core.bson DEFAULT&#160;</td>
          <td class="paramname"><em>null</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drops index(es) from a MongoDB collection. </p>
<p>This procedure removes one or more indexes from a specified collection in a MongoDB database. It processes the <code>dropIndexes</code> command, which can drop a single index by name, multiple indexes, or all indexes on a collection except for the default index on the <code>_id</code> field. The operation's results are returned in the <code>retval</code> parameter.</p>
<p><b>Usage Examples:</b></p><ul>
<li>Drop a single index by name: <div class="fragment"><div class="line">documentdb_api.drop_indexes(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;dropIndexes&quot;: &quot;collection_1&quot;, &quot;index&quot;: &quot;index_name&quot;}&#39;</span>);</div>
</div><!-- fragment --></li>
<li>Drop multiple indexes by names: <div class="fragment"><div class="line">documentdb_api.drop_indexes(<span class="stringliteral">&#39;db&#39;</span>, <span class="stringliteral">&#39;{&quot;dropIndexes&quot;: &quot;collection_1&quot;, &quot;index&quot;: [&quot;index1&quot;, &quot;index2&quot;]}&#39;</span>);</div>
</div><!-- fragment --></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database_name</td><td>The name of the database containing the target collection. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_arg</td><td>A BSON document specifying the indexes to be dropped. It must include:<ul>
<li><code>"dropIndexes"</code>: The name of the collection from which to drop indexes.</li>
<li><code>"index"</code>: The name of the index to drop, an array of index names, or <code>"*"</code> to drop all user-defined indexes. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">retval</td><td>A BSON document that will be updated with the result of the operation, including information such as the number of indexes dropped and any error messages. Defaults to NULL if not provided.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <code>retval</code> parameter will contain a BSON document with the result of the operation, which includes fields like:<ul>
<li><code>"ok"</code>: Indicates whether the operation was successful (<code>true</code>) or not (<code>false</code>).</li>
<li><code>"nIndexesWas"</code>: The number of indexes before the drop operation. <b>Notes:</b></li>
<li>Dropping indexes is a blocking operation and may impact performance.</li>
<li>When dropping multiple indexes, if any index does not exist, the entire operation will fail.</li>
<li>Use caution when dropping indexes, as it may affect query performance.</li>
<li>The function does not allow dropping the default <code>_id</code> index. </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
